<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RTC FreeChat - Discord-like VoIP</title>
  <link rel="stylesheet" href="/style.css" />
</head>

<body>
  <!-- Join Screen -->
  <div class="join-screen" id="join-screen">
    <div class="join-card">
      <h1 class="join-title">Welcome to FreeChat</h1>
      <p class="join-subtitle">Enter your display name to get started</p>
      <form id="join-form">
        <input id="display-name-input" type="text" placeholder="Display Name" required autocomplete="off" />
        <button type="submit" id="join-button">Continue</button>
      </form>
    </div>
  </div>

  <!-- Main App (Discord-like layout) -->
  <div class="app hidden" id="app">
    <!-- Left Sidebar: Channels -->
    <aside class="sidebar-left">
      <div class="server-header">
        <div class="server-icon">FC</div>
        <div class="server-name">FreeChat</div>
      </div>
      <div class="channels-section">
        <div class="channels-header">
          <span>CHANNELS</span>
          <button class="icon-button" id="create-channel-btn" title="Create Channel">+</button>
        </div>
        <div class="channel-category">
          <div class="category-header">
            <span>ðŸ“¢ TEXT CHANNELS</span>
          </div>
          <ul class="channel-list" id="text-channels-list"></ul>
        </div>
        <div class="channel-category">
          <div class="category-header">
            <span>ðŸ”Š VOICE CHANNELS</span>
          </div>
          <ul class="channel-list" id="voice-channels-list"></ul>
        </div>
      </div>
      <!-- Voice Panel (in sidebar) -->
      <div class="voice-panel hidden" id="voice-panel">
        <div class="voice-channel-name" id="voice-channel-name">Voice Channel</div>
        <div class="voice-controls-mini">
          <button class="icon-button" id="voice-disconnect-btn" title="Disconnect">
            ðŸš«
          </button>
          <label class="ptt-toggle-mini">
            <input type="checkbox" id="ptt-checkbox" />
            <span>PTT</span>
          </label>
        </div>
        <div class="status-text-mini" id="status-text">Connected</div>
      </div>

      <div class="user-info">
        <div class="user-avatar" id="user-avatar"></div>
        <div class="user-details">
          <div class="user-name" id="user-name">Guest</div>
          <div class="user-status">Online</div>
        </div>
        <button class="icon-button" id="mute-button" title="Mute/Unmute">ðŸ”‡</button>
      </div>
    </aside>

    <!-- Main Content Area -->
    <main class="main-content">
      <!-- Channel Header -->
      <header class="channel-header">
        <div class="channel-header-left">
          <button class="mobile-menu-button" id="mobile-menu-button" title="Menu">â˜°</button>
          <span class="channel-icon" id="current-channel-icon">#</span>
          <span class="channel-name" id="current-channel-name">Select a channel</span>
        </div>
        <div class="channel-header-right">
          <button class="icon-button mobile-members-button" id="mobile-members-button" title="Members">ðŸ‘¥</button>

        </div>
      </header>

      <!-- Chat Messages Area (for text channels) -->
      <div class="messages-area" id="messages-area">
        <div class="messages-container" id="chat-messages"></div>
        <form id="chat-form" class="chat-form">
          <input id="chat-file-input" type="file" class="chat-file-input hidden" title="Attach a file" />
          <div class="chat-input-wrapper">
            <button type="button" class="chat-icon-button" id="emoji-button" title="Add emoji">
              ðŸ˜€
            </button>
            <button type="button" class="chat-icon-button" id="file-button" title="Attach file">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <path
                  d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48">
                </path>
              </svg>
            </button>
            <input id="chat-input" type="text" placeholder="Type a message..." autocomplete="off" />
            <button type="submit" class="send-button">Send</button>
          </div>
        </form>
        <div id="chat-file-name" class="chat-file-name"></div>
        <label class="compress-toggle">
          <input type="checkbox" id="compress-images-checkbox" checked />
          <span>Compress images</span>
        </label>
        <!-- Emoji Picker -->
        <!-- WhatsApp-style Emoji Picker -->
        <div class="emoji-picker hidden" id="emoji-picker">
          <div class="emoji-picker-search">
            <input type="text" id="emoji-search-input" placeholder="Search emojis..." autocomplete="off" />
          </div>
          <div class="emoji-picker-content" id="emoji-picker-content"></div>
          <div class="emoji-picker-tabs" id="emoji-picker-tabs"></div>
        </div>
      </div>


    </main>

    <!-- Right Sidebar: Members -->
    <aside class="sidebar-right">
      <div class="members-header">
        <span>MEMBERS</span>
        <span class="member-count" id="member-count">0</span>
      </div>
      <div class="members-list" id="members-list"></div>
    </aside>
  </div>

  <!-- Create Channel Modal -->
  <div class="modal-overlay hidden" id="create-channel-modal">
    <div class="modal">
      <h2>Create Channel</h2>
      <form id="create-channel-form">
        <label>
          Channel Name
          <input id="channel-name-input" type="text" placeholder="e.g. general" required autocomplete="off" />
        </label>
        <label>
          Channel Type
          <select id="channel-type-select">
            <option value="text">Text Channel</option>
            <option value="voice">Voice Channel</option>
          </select>
        </label>
        <div class="modal-actions">
          <button type="button" class="cancel-btn" id="cancel-channel-btn">Cancel</button>
          <button type="submit" class="create-btn">Create</button>
        </div>
      </form>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script type="module" src="/js/main.js"></script>
</body>

</html>